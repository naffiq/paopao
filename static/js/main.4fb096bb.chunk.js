(this.webpackJsonppaopao=this.webpackJsonppaopao||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var i,o=n(1),r=n(5),c=n(3),a=n(2);n(14);!function(t){t[t.Initial=0]="Initial",t[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=3]="Left",t[t.Right=4]="Right"}(i||(i={}));var l=window.outerWidth>window.outerHeight?9:16,u=window.outerWidth>window.outerHeight?16:9,d=function(){var t=new Array(u*l).fill(null).map((function(t,e){return Math.floor(e/4)}));return new Array(l).fill(null).map((function(){return new Array(u).fill(null).map((function(){return{cardType:t.splice(Math.floor(Math.random()*t.length),1)[0],isSolved:!1,isSelected:!1}}))}))},s=function(t){var e=Object(o.useState)(d()),n=Object(a.a)(e,2),r=n[0],s=n[1],f=Object(o.useState)(!1),h=Object(a.a)(f,2),p=h[0],v=h[1],j=Object(o.useState)(0),b=Object(a.a)(j,2),x=b[0],y=b[1],O=Object(o.useState)(void 0),g=Object(a.a)(O,2),w=g[0],m=g[1],S=Object(o.useState)(void 0),F=Object(a.a)(S,2),k=F[0],C=F[1],T=Object(o.useState)(),E=Object(a.a)(T,2),M=E[0],I=E[1],D=function(t,e,n){!function(t,e,n){var i=r[e].map((function(e,i){return i===t?n:e}));s(r.map((function(t,n){return n===e?i:t})))}(t,e,Object(c.a)(Object(c.a)({},r[e][t]),{},{isSelected:n}))},A=function(t,e){var n=t.x,o=t.y,c=e.x,a=e.y,d=new Array(l+1).fill(null).map((function(){return new Array(u).fill(999)}));d[-1]=new Array(u).fill(999);return function t(e,n,o,s){if(!(s>2||d[o][n]<s)&&(d[o][n]=s,(n!=c||o!=a)&&(!r[o]||!r[o][n]||r[o][n].isSolved||e===i.Initial)&&!(d[a][c]<=2))){var f=function(t){return e!==t&&e!==i.Initial?1:0};n>-1&&t(i.Left,n-1,o,s+f(i.Left)),n<u&&t(i.Right,n+1,o,s+f(i.Right)),o>-1&&t(i.Up,n,o-1,s+f(i.Up)),o<l&&t(i.Down,n,o+1,s+f(i.Down))}}(i.Initial,n,o,0),d[a][c]<=2};Object(o.useEffect)((function(){if(void 0!==w&&void 0!==k){var e=r[w.y][w.x],n=r[k.y][k.x],i=e.cardType===n.cardType&&A(w,k);setTimeout((function(){!function(e){var n=r.map((function(t){return t.map((function(t){return t.isSelected?Object(c.a)(Object(c.a)({},t),{},{isSelected:!1,isSolved:e}):t}))}));if(e){y(x+1),x===u*l/2-1&&(n=d(),t());for(var i=H(n);void 0===i;)n=R(n),i=H(n);I(i)}s(n)}(i),m(void 0),C(void 0),v(!1)}),500)}}),[w,k]);var H=function(t){for(var e=function(e){var n=[];t.forEach((function(t,i){t.forEach((function(t,o){t.cardType!==e||t.isSolved||n.push({x:o,y:i})}))}));for(var i=0;i<n.length-1;i++)for(var o=i+1;o<n.length;o++)if(A(n[i],n[o]))return{v:[n[i],n[o]]}},n=0;n<36;n++){var i=e(n);if("object"===typeof i)return i.v}},R=function(t){var e=[];return t.forEach((function(t){return t.forEach((function(t){t.isSolved||e.push(t.cardType)}))})),t.map((function(t){return t.map((function(t){return{cardType:t.isSolved?t.cardType:e.splice(Math.floor(Math.random()*e.length),1)[0],isSelected:!1,isSolved:t.isSolved}}))}))};Object(o.useEffect)((function(){I(H(r))}),[]);return{gameField:r,selectFieldTile:function(t,e){var n=r[e][t];n.isSolved||n.isSelected||(void 0===w?(D(t,e,!0),m({x:t,y:e})):void 0===k&&(D(t,e,!0),C({x:t,y:e})))},existingSolution:M,onShowHint:function(){v(!0)},showHint:p,couplesFound:x}},f=n(0),h=function(t){var e=t.cardType,n=t.isSelected,i=t.isSolved,o=t.onClick,r=t.highlighted,c=Math.min(Math.floor(Math.min((window.innerWidth-4*u)/u,window.innerHeight/l)),60),a=Math.floor(e%6)*c,d=Math.floor(e/6)*c,s=function(t,e,o){return i?"transparent":n?t:r?o:e},h=s("#B5DDE5","#FFFFDB","red"),p=s("#566F81","#817C56","red"),v=s("#D2F7FF","#E9E3B9","red");return Object(f.jsx)("div",{style:{width:c+"px",height:c+"px",background:i?void 0:"url(".concat("/paopao","/sprites.png) ").concat(a,"px ").concat(d,"px"),backgroundColor:h,backgroundSize:"".concat(c/60*360,"px"),borderTop:"2px solid "+p,borderRight:"2px solid "+p,borderBottom:"2px solid "+v,borderLeft:"2px solid "+v,cursor:i?"default":"pointer"},onClick:function(){return o()}})},p=function(t){var e=t.onOk,n=t.show;return Object(f.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, .4)",position:"absolute",width:"100vw",height:"100vh",zIndex:10,left:0,top:0,display:n?"flex":"none",alignItems:"center",justifyContent:"center"},children:Object(f.jsxs)("div",{style:{backgroundColor:"#FFF",padding:"16px"},children:[Object(f.jsx)("h2",{children:"Congratulations!"}),Object(f.jsx)("p",{children:"There are no further levels at this point but you can replay the first level again :)"}),Object(f.jsx)("button",{onClick:e,children:"Great"})]})})};function v(){var t=s((function(){b(!0)})),e=t.gameField,n=t.selectFieldTile,i=t.existingSolution,r=t.onShowHint,l=t.showHint,u=t.couplesFound,d=Object(o.useState)(!1),v=Object(a.a)(d,2),j=v[0],b=v[1];return Object(f.jsxs)("div",{className:"App",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",margin:"0 auto",maxWidth:"1024px",flexDirection:"column",caretColor:"transparent"},children:[Object(f.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(f.jsxs)("h1",{style:{color:"white"},children:["PaoPao ",u,"/72"]}),Object(f.jsx)("button",{onClick:r,children:"Show hint"})]}),Object(f.jsx)("div",{children:e.map((function(t,e){return Object(f.jsx)("div",{style:{display:"flex"},children:t.map((function(t,r){return Object(o.createElement)(h,Object(c.a)(Object(c.a)({highlighted:!(!l||!i)&&(null===i||void 0===i?void 0:i.some((function(t){return t.x===r&&t.y===e})))},t),{},{key:"card-".concat(r,"-").concat(e,"-").concat(t.cardType),onClick:function(){return n(r,e)}}))}))},"row-".concat(e))}))}),Object(f.jsx)(p,{show:j,onOk:function(){return b(!1)}})]})}var j=document.getElementById("root");r.createRoot(j).render(Object(f.jsx)(o.StrictMode,{children:Object(f.jsx)(v,{})}))}},[[16,1,2]]]);
//# sourceMappingURL=main.4fb096bb.chunk.js.map