(this.webpackJsonppaopao=this.webpackJsonppaopao||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n(5),r=n(2),c=(n(14),n(1)),a=function(e){var t=60*Math.floor(e.cardType%6),n=60*Math.floor(e.cardType/6),i=function(t,n,i){return console.log(e),e.isSolved?"transparent":e.isSelected?t:e.highlighted?i:n},o=i("#B5DDE5","#FFFFDB","red"),r=i("#566F81","#817C56","red"),a=i("#D2F7FF","#E9E3B9","red");return Object(c.jsx)("div",{style:{width:"60px",height:"60px",background:e.isSolved?void 0:"url(/sprites.png) ".concat(t,"px ").concat(n,"px"),backgroundColor:o,borderTop:"1px solid "+r,borderRight:"1px solid "+r,borderBottom:"1px solid "+a,borderLeft:"1px solid "+a},onClick:function(){return e.onClick()}})},l=n(3),u=function(){var e=Object(i.useState)(function(){var e=new Array(144).fill(null).map((function(e,t){return Math.floor(t/4)}));return new Array(9).fill(null).map((function(){return new Array(16).fill(null).map((function(){return{cardType:e.splice(Math.floor(Math.random()*e.length),1)[0],isSolved:!1,isSelected:!1}}))}))}()),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(i.useState)(!1),a=Object(l.a)(c,2),u=a[0],d=a[1],f=Object(i.useState)(void 0),s=Object(l.a)(f,2),p=s[0],v=s[1],h=Object(i.useState)(void 0),j=Object(l.a)(h,2),b=j[0],y=j[1],x=Object(i.useState)(),S=Object(l.a)(x,2),g=S[0],O=S[1],m=function(e,t,i){!function(e,t,i){var r=n[t].map((function(t,n){return n===e?i:t}));o(n.map((function(e,n){return n===t?r:e})))}(e,t,Object(r.a)(Object(r.a)({},n[t][e]),{},{isSelected:i}))},w=function(e,t){var i,o=e.x,r=e.y,c=t.x,a=t.y,l=new Array(10).fill(null).map((function(){return new Array(16).fill(999)}));l[-1]=new Array(16).fill(999),function(e){e[e.Initial=0]="Initial",e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Right=4]="Right"}(i||(i={}));return function e(t,o,r,u){if(!(u>2||l[r][o]<u)&&(l[r][o]=u,(o!=c||r!=a)&&(!n[r]||!n[r][o]||n[r][o].isSolved||t===i.Initial)&&!(l[a][c]<=2))){var d=function(e){return t!==e&&t!==i.Initial?1:0};o>-1&&e(i.Left,o-1,r,u+d(i.Left)),o<16&&e(i.Right,o+1,r,u+d(i.Right)),r>-1&&e(i.Up,o,r-1,u+d(i.Up)),r<9&&e(i.Down,o,r+1,u+d(i.Down))}}(i.Initial,o,r,0),l[a][c]<=2};Object(i.useEffect)((function(){if(void 0!==p&&void 0!==b){var e=n[p.y][p.x],t=n[b.y][b.x],i=e.cardType===t.cardType&&w(p,b);setTimeout((function(){!function(e){var t=n.map((function(t){return t.map((function(t){return t.isSelected?Object(r.a)(Object(r.a)({},t),{},{isSelected:!1,isSolved:e}):t}))}));if(e){for(var i=E(t);void 0===i;)t=T(t),i=E(t);O(i)}o(t)}(i),v(void 0),y(void 0),d(!1)}),500)}}),[p,b]),Object(i.useEffect)((function(){console.log("existingSolution",g),void 0===g&&console.log("TODO: REGENERATE THE MAP")}),[g]);var E=function(e){for(var t=function(t){var n=[];e.forEach((function(e,i){e.forEach((function(e,o){e.cardType!==t||e.isSolved||n.push({x:o,y:i})}))}));for(var i=0;i<n.length-1;i++)for(var o=i+1;o<n.length;o++)if(w(n[i],n[o]))return{v:[n[i],n[o]]}},n=0;n<36;n++){var i=t(n);if("object"===typeof i)return i.v}},T=function(e){var t=[];e.forEach((function(e){return e.forEach((function(e){e.isSolved||t.push(e.cardType)}))}));var n=e.map((function(e){return e.map((function(e){return{cardType:e.isSolved?e.cardType:t.splice(Math.floor(Math.random()*t.length),1)[0],isSelected:!1,isSolved:e.isSolved}}))}));return console.log(n),n};Object(i.useEffect)((function(){O(E(n))}),[]);return{gameField:n,selectFieldTile:function(e,t){var i=n[t][e];i.isSolved||i.isSelected||(void 0===p?(m(e,t,!0),v({x:e,y:t})):void 0===b&&(m(e,t,!0),y({x:e,y:t})))},existingSolution:g,onShowHint:function(){d(!0)},showHint:u,onFieldShuffle:function(){var e=void 0,t=void 0;do{e=T(n),t=E(e)}while(void 0===t);O(t),o(e)}}};function d(){var e=u(),t=e.gameField,n=e.selectFieldTile,o=e.existingSolution,l=e.onShowHint,d=e.showHint;e.onFieldShuffle;return Object(c.jsxs)("div",{className:"App",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",maxWidth:"1024",flexDirection:"column",caretColor:"transparent"},children:[Object(c.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(c.jsxs)("h1",{children:["PaoPao - ",o?"Solution exists":"Nah man, give up"]}),Object(c.jsx)("button",{onClick:l,children:"Show hint"})]}),Object(c.jsx)("div",{children:t.map((function(e,t){return Object(c.jsx)("div",{style:{display:"flex"},children:e.map((function(e,c){return Object(i.createElement)(a,Object(r.a)(Object(r.a)({highlighted:!(!d||!o)&&(null===o||void 0===o?void 0:o.some((function(e){return e.x===c&&e.y===t})))},e),{},{key:"card-".concat(c,"-").concat(t,"-").concat(e.cardType),onClick:function(){return n(c,t)}}))}))},"row-".concat(t))}))})]})}var f=document.getElementById("root");o.createRoot(f).render(Object(c.jsx)(i.StrictMode,{children:Object(c.jsx)(d,{})}))}},[[16,1,2]]]);
//# sourceMappingURL=main.9e62d8e4.chunk.js.map