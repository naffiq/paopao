(this.webpackJsonppaopao=this.webpackJsonppaopao||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(5),r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var a,l=n(3),s=n(2);n(14);!function(e){e[e.Initial=0]="Initial",e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Right=4]="Right"}(a||(a={}));var u=window.outerWidth>window.outerHeight?9:16,d=window.outerWidth>window.outerHeight?16:9,f="paopao-field",h=function(){var e=new Array(d*u).fill(null).map((function(e,t){return Math.floor(t/4)}));return new Array(u).fill(null).map((function(){return new Array(d).fill(null).map((function(){return{cardType:e.splice(Math.floor(Math.random()*e.length),1)[0],isSolved:!1,isSelected:!1}}))}))},p=localStorage.getItem(f),v=null!==p?JSON.parse(p):h(),g=function(e){var t=Object(o.useState)(v),n=Object(s.a)(t,2),i=n[0],r=n[1],c=Object(o.useState)(!1),p=Object(s.a)(c,2),g=p[0],b=p[1],w=Object(o.useState)(function(e){var t=0;return e.forEach((function(e){return e.forEach((function(e){return t+=e.isSolved?1:0}))})),t/2}(v)),j=Object(s.a)(w,2),y=j[0],x=j[1],O=Object(o.useState)(void 0),m=Object(s.a)(O,2),S=m[0],k=m[1],F=Object(o.useState)(void 0),T=Object(s.a)(F,2),C=T[0],E=T[1],I=Object(o.useState)(),W=Object(s.a)(I,2),M=W[0],A=W[1],D=function(e,t,n){!function(e,t,n){var o=i[t].map((function(t,o){return o===e?n:t}));r(i.map((function(e,n){return n===t?o:e})))}(e,t,Object(l.a)(Object(l.a)({},i[t][e]),{},{isSelected:n}))},H=function(e,t){var n=e.x,o=e.y,r=t.x,c=t.y,l=new Array(u+1).fill(null).map((function(){return new Array(d).fill(999)}));l[-1]=new Array(d).fill(999);return function e(t,n,o,s){if(!(s>2||l[o][n]<s)&&(l[o][n]=s,(n!=r||o!=c)&&(!i[o]||!i[o][n]||i[o][n].isSolved||t===a.Initial)&&!(l[c][r]<=2))){var f=function(e){return t!==e&&t!==a.Initial?1:0};n>-1&&e(a.Left,n-1,o,s+f(a.Left)),n<d&&e(a.Right,n+1,o,s+f(a.Right)),o>-1&&e(a.Up,n,o-1,s+f(a.Up)),o<u&&e(a.Down,n,o+1,s+f(a.Down))}}(a.Initial,n,o,0),l[c][r]<=2};Object(o.useEffect)((function(){if(void 0!==S&&void 0!==C){var t=i[S.y][S.x],n=i[C.y][C.x],o=t.cardType===n.cardType&&H(S,C);setTimeout((function(){!function(t){var n=i.map((function(e){return e.map((function(e){return e.isSelected?Object(l.a)(Object(l.a)({},e),{},{isSelected:!1,isSolved:t}):e}))}));if(t){x(y+1),y===d*u/2-1&&(n=h(),e());for(var o=L(n);void 0===o;)n=R(n),o=L(n);A(o)}r(n),localStorage.setItem(f,JSON.stringify(n))}(o),k(void 0),E(void 0),b(!1)}),500)}}),[S,C]);var L=function(e){for(var t=function(t){var n=[];e.forEach((function(e,o){e.forEach((function(e,i){e.cardType!==t||e.isSolved||n.push({x:i,y:o})}))}));for(var o=0;o<n.length-1;o++)for(var i=o+1;i<n.length;i++)if(H(n[o],n[i]))return{v:[n[o],n[i]]}},n=0;n<36;n++){var o=t(n);if("object"===typeof o)return o.v}},R=function(e){var t=[];return e.forEach((function(e){return e.forEach((function(e){e.isSolved||t.push(e.cardType)}))})),e.map((function(e){return e.map((function(e){return{cardType:e.isSolved?e.cardType:t.splice(Math.floor(Math.random()*t.length),1)[0],isSelected:!1,isSolved:e.isSolved}}))}))};Object(o.useEffect)((function(){A(L(i))}),[]);return{gameField:i,selectFieldTile:function(e,t){var n=i[t][e];n.isSolved||n.isSelected||(void 0===S?(D(e,t,!0),k({x:e,y:t})):void 0===C&&(D(e,t,!0),E({x:e,y:t})))},existingSolution:M,onShowHint:function(){b(!0)},showHint:g,couplesFound:y}},b=n(0),w=function(e){var t=e.cardType,n=e.isSelected,o=e.isSolved,i=e.onClick,r=e.highlighted,c=Math.min(Math.floor(Math.min((window.innerWidth-4*d)/d,window.innerHeight/u)),60),a=Math.floor(t%6)*c,l=Math.floor(t/6)*c,s=function(e,t,i){return o?"transparent":n?e:r?i:t},f=s("#B5DDE5","#FFFFDB","red"),h=s("#566F81","#817C56","red"),p=s("#D2F7FF","#E9E3B9","red");return Object(b.jsx)("div",{style:{width:c+"px",height:c+"px",backgroundImage:o?void 0:"url(".concat("/paopao","/sprites.png)"),backgroundColor:f,backgroundPosition:"".concat(a,"px ").concat(l,"px"),backgroundSize:"".concat(c/60*360,"px"),borderTop:"2px solid "+h,borderRight:"2px solid "+h,borderBottom:"2px solid "+p,borderLeft:"2px solid "+p,cursor:o?"default":"pointer"},onClick:function(){return i()}})},j=function(e){var t=e.onOk,n=e.show;return Object(b.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, .4)",position:"absolute",width:"100vw",height:"100vh",zIndex:10,left:0,top:0,display:n?"flex":"none",alignItems:"center",justifyContent:"center"},children:Object(b.jsxs)("div",{style:{backgroundColor:"#FFF",padding:"16px"},children:[Object(b.jsx)("h2",{children:"Congratulations!"}),Object(b.jsx)("p",{children:"There are no further levels at this point but you can replay the first level again :)"}),Object(b.jsx)("button",{onClick:t,children:"Great"})]})})};function y(){var e=g((function(){h(!0)})),t=e.gameField,n=e.selectFieldTile,i=e.existingSolution,r=e.onShowHint,c=e.showHint,a=e.couplesFound,u=Object(o.useState)(!1),d=Object(s.a)(u,2),f=d[0],h=d[1];return Object(b.jsxs)("div",{className:"App",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",margin:"0 auto",maxWidth:"1024px",flexDirection:"column",caretColor:"transparent"},children:[Object(b.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(b.jsxs)("h1",{style:{color:"white"},children:["PaoPao ",a,"/72"]}),Object(b.jsx)("button",{onClick:r,children:"Show hint"})]}),Object(b.jsx)("div",{children:t.map((function(e,t){return Object(b.jsx)("div",{style:{display:"flex"},children:e.map((function(e,r){return Object(o.createElement)(w,Object(l.a)(Object(l.a)({highlighted:!(!c||!i)&&(null===i||void 0===i?void 0:i.some((function(e){return e.x===r&&e.y===t})))},e),{},{key:"card-".concat(r,"-").concat(t,"-").concat(e.cardType),onClick:function(){return n(r,t)}}))}))},"row-".concat(t))}))}),Object(b.jsx)(j,{show:f,onOk:function(){return h(!1)}})]})}var x=document.getElementById("root");i.createRoot(x).render(Object(b.jsx)(o.StrictMode,{children:Object(b.jsx)(y,{})})),function(e){if("serviceWorker"in navigator){if(new URL("/paopao",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/paopao","/service-worker.js");r?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):c(t,e)}))}}()}},[[16,1,2]]]);
//# sourceMappingURL=main.a5c878a9.chunk.js.map